<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“˜ Ø³Ø¬Ù„ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ - Ù†Ø¸Ø§Ù… Ø§Ù„ÙØµÙˆÙ„ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');

    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      background-size: 400% 400%;
      animation: gradientMove 12s ease infinite;
      color: #f4f4f4;
      padding: 20px;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .navbar {
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(6px);
      padding: 12px 20px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      position: sticky;
      top: 10px;
      z-index: 999;
    }

    .navbar h2 {
      color: #f1c40f;
      margin: 0;
      font-size: 22px;
      text-shadow: 0 0 10px rgba(241,196,15,0.6);
    }

    .navbar select {
      font-family: 'Cairo', sans-serif;
      font-size: 16px;
      padding: 6px 10px;
      border-radius: 6px;
      border: none;
      background: rgba(255,255,255,0.9);
      color: #2c3e50;
      font-weight: 600;
    }

    .btn-container {
      text-align: center;
      margin-bottom: 25px;
    }

    button {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
      margin: 0 6px;
      transition: all 0.3s ease;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0,0,0,0.25);
    }

    button:hover { transform: scale(1.07); }

    .add-btn { background: linear-gradient(135deg, #16a085, #1abc9c); color: white; }
    .clear-btn { background: linear-gradient(135deg, #f39c12, #e67e22); color: white; }
    .export-btn { background: linear-gradient(135deg, #8e44ad, #9b59b6); color: white; }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255,255,255,0.06);
      backdrop-filter: blur(5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      border-radius: 12px;
      overflow: hidden;
    }

    th, td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    th {
      background: linear-gradient(135deg, #2980b9, #3498db);
      color: white;
      font-size: 15px;
      letter-spacing: 0.5px;
    }

    tr:nth-child(even) { background: rgba(255, 255, 255, 0.07); }
    tr:hover { background: rgba(241, 196, 15, 0.15); }

    td select, td input, td textarea {
      padding: 5px;
      font-size: 14px;
      border: 1px solid #aaa;
      border-radius: 5px;
      background: rgba(255,255,255,0.9);
      color: #2c3e50;
      width: 100%;
      box-sizing: border-box;
    }

    textarea {
      resize: none;
      height: 35px;
    }

    .total, .percentage, .grade {
      font-weight: bold;
      color: #f1c40f;
    }

    .delete-btn {
      background: linear-gradient(135deg, #c0392b, #e74c3c);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 6px 10px;
      cursor: pointer;
    }

    .delete-btn:hover { background: linear-gradient(135deg, #a93226, #c0392b); transform: scale(1.1); }

    footer {
      margin-top: 40px;
      text-align: center;
      color: #f1c40f;
      font-size: 15px;
      letter-spacing: 1px;
    }

    .excellent { background: rgba(46, 204, 113, 0.25) !important; }
    .vgood { background: rgba(52, 152, 219, 0.25) !important; }
    .good { background: rgba(241, 196, 15, 0.25) !important; }
    .pass { background: rgba(230, 126, 34, 0.25) !important; }
    .weak { background: rgba(231, 76, 60, 0.3) !important; }

    .class-note {
      margin-top: 25px;
      background: rgba(255,255,255,0.08);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    .class-note h3 {
      color: #f1c40f;
      margin-bottom: 10px;
      text-shadow: 0 0 10px rgba(241,196,15,0.5);
    }

    .class-note textarea {
      width: 100%;
      height: 80px;
      resize: vertical;
      font-size: 15px;
    }

  </style>
</head>
<body>

  <div class="navbar">
    <h2>ğŸ“š Ø³Ø¬Ù„ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨</h2>
    <div>
      <select id="stageSelect" onchange="switchStage()">
        <option value="1">Ø£ÙˆÙ„ Ø«Ø§Ù†ÙˆÙŠ</option>
        <option value="2">Ø«Ø§Ù†ÙŠ Ø«Ø§Ù†ÙˆÙŠ</option>
        <option value="3">Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
      </select>
      <select id="classSelect" onchange="switchClass()">
        <option value="1">Ø§Ù„ÙØµÙ„ 1</option>
        <option value="2">Ø§Ù„ÙØµÙ„ 2</option>
        <option value="3">Ø§Ù„ÙØµÙ„ 3</option>
        <option value="4">Ø§Ù„ÙØµÙ„ 4</option>
      </select>
    </div>
  </div>

  <div class="btn-container">
    <button class="add-btn" onclick="addStudentRow()">â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨</button>
    <button class="clear-btn" onclick="clearAllData()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    <button class="export-btn" onclick="exportToExcel()">ğŸ“¤ ØªØµØ¯ÙŠØ±</button>
  </div>

  <table>
    <thead>
      <tr>
        <th>#ï¸âƒ£</th>
        <th>ğŸ‘¨â€ğŸ“ Ø§Ù„Ø§Ø³Ù…</th>
        <th>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± (20)</th>
        <th>ğŸ“– Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØªØ±Ø© (20)</th>
        <th>ğŸ“š Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª (10)</th>
        <th>ğŸ¯ Ø§Ù„Ù†Ø´Ø§Ø· (10)</th>
        <th>ğŸ’¬ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (10)</th>
        <th>ğŸ“Š Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
        <th>ğŸ“ˆ Ø§Ù„Ù†Ø³Ø¨Ø© %</th>
        <th>ğŸ… Ø§Ù„ØªÙ‚Ø¯ÙŠØ±</th>
        <th>ğŸ—’ï¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
        <th>ğŸ—‘ï¸ Ø­Ø°Ù</th>
      </tr>
    </thead>
    <tbody id="studentsBody"></tbody>
  </table>

  <!-- ğŸ”¹ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙØµÙ„ -->
  <div class="class-note">
    <h3>ğŸ—’ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙØµÙ„</h3>
    <textarea id="classNote" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø© Ø¹Ù† Ø§Ù„ÙØµÙ„..."></textarea>
  </div>

  <footer>ğŸŒŸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 ğŸŒŸ</footer>

  <script>
    let studentCounter = 0;
    let currentStage = "1";
    let currentClass = "1";
    let allData = JSON.parse(localStorage.getItem("gradesData") || "{}");

    function key() {
      return `stage${currentStage}_class${currentClass}`;
    }

    function saveCurrentData() {
      const rows = Array.from(document.querySelectorAll("#studentsBody tr")).map(r => {
        const name = r.querySelector("input").value;
        const scores = Array.from(r.querySelectorAll("select")).map(s=>s.value);
        const note = r.querySelector("textarea").value;
        return { name, scores, note };
      });
      const classNote = document.getElementById("classNote").value;
      allData[key()] = { rows, classNote };
      localStorage.setItem("gradesData", JSON.stringify(allData));
    }

    function loadData() {
      const tbody = document.getElementById("studentsBody");
      tbody.innerHTML = "";
      const data = allData[key()] || { rows: [], classNote: "" };
      const rows = data.rows || [];
      studentCounter = 0;
      rows.forEach(r => {
        addStudentRow();
        const tr = tbody.lastElementChild;
        tr.querySelector("input").value = r.name;
        const selects = tr.querySelectorAll("select");
        r.scores.forEach((v,i)=>selects[i].value=v);
        tr.querySelector("textarea").value = r.note || "";
        calculateRow(tr);
      });
      document.getElementById("classNote").value = data.classNote || "";
    }

    function addStudentRow() {
      const tbody = document.getElementById("studentsBody");
      const row = document.createElement("tr");
      studentCounter++;
      row.innerHTML = `
        <td>${studentCounter}</td>
        <td><input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"></td>
        <td><select>${opts(20)}</select></td>
        <td><select>${opts(20)}</select></td>
        <td><select>${opts(10)}</select></td>
        <td><select>${opts(10)}</select></td>
        <td><select>${opts(10)}</select></td>
        <td class="total">0</td>
        <td class="percentage">0%</td>
        <td class="grade"></td>
        <td><textarea placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea></td>
        <td><button class="delete-btn" onclick="deleteRow(this)">ğŸ—‘ï¸</button></td>
      `;
      tbody.appendChild(row);
      row.querySelectorAll("select, input, textarea").forEach(el => el.addEventListener("change", () => {
        calculateRow(row);
        saveCurrentData();
      }));
    }

    document.getElementById("classNote").addEventListener("input", saveCurrentData);

    function opts(max) {
      let o = "";
      for(let i=0;i<=max;i++) o += `<option value="${i}">${i}</option>`;
      return o;
    }

    function calculateRow(row) {
      const vals = Array.from(row.querySelectorAll("select")).map(s=>+s.value||0);
      const total = vals.reduce((a,b)=>a+b,0);
      const perc = (total/70*100).toFixed(2);
      row.querySelector(".total").innerText = total;
      row.querySelector(".percentage").innerText = perc+"%";
      const grade = row.querySelector(".grade");
      if(perc>=90) grade.innerText="Ù…Ù…ØªØ§Ø²";
      else if(perc>=80) grade.innerText="Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§";
      else if(perc>=70) grade.innerText="Ø¬ÙŠØ¯";
      else if(perc>=60) grade.innerText="Ù†Ø§Ø¬Ø­";
      else grade.innerText="Ø¶Ø¹ÙŠÙ";
      row.className = "";
      if(perc>=90) row.classList.add("excellent");
      else if(perc>=80) row.classList.add("vgood");
      else if(perc>=70) row.classList.add("good");
      else if(perc>=60) row.classList.add("pass");
      else row.classList.add("weak");
    }

    function deleteRow(btn) {
      btn.closest("tr").remove();
      updateNumbers();
      saveCurrentData();
    }

    function updateNumbers() {
      const rows = document.querySelectorAll("#studentsBody tr");
      rows.forEach((r,i)=>r.children[0].innerText = i+1);
      studentCounter = rows.length;
    }

    function clearAllData() {
      if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø°Ø§ Ø§Ù„ÙØµÙ„ØŸ")) {
        document.getElementById("studentsBody").innerHTML = "";
        document.getElementById("classNote").value = "";
        studentCounter = 0;
        allData[key()] = { rows: [], classNote: "" };
        localStorage.setItem("gradesData", JSON.stringify(allData));
      }
    }

    function exportToExcel() {
      alert("ğŸ“¤ Ù…ÙŠØ²Ø© Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel Ø³ØªØªÙˆÙØ± Ù‚Ø±ÙŠØ¨Ù‹Ø§!");
    }

    function switchStage() {
      saveCurrentData();
      currentStage = document.getElementById("stageSelect").value;
      currentClass = "1";
      document.getElementById("classSelect").value = "1";
      loadData();
    }

    function switchClass() {
      saveCurrentData();
      currentClass = document.getElementById("classSelect").value;
      loadData();
    }

    window.addEventListener("beforeunload", saveCurrentData);
    loadData();
  </script>

</body>
</html>



















   



